<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <button id="rock">Rock</button>
    <button id="paper">Paper</button>
    <button id="scissors">Scissors</button>
    <div id ="container"></div>
</body>
</html>

<script>

 document.getElementById("rock").addEventListener("click",
 function() {
    playRound("rock");
    console.log(this);
 })
 document.getElementById("paper").addEventListener("click",
 function() {
    playRound("paper");
    console.log(this);
 })
 document.getElementById("scissors").addEventListener("click",
 function() {
    playRound("scissors");
    console.log(this);
 })
 const container = document.querySelector('#container');
 const div = document.createElement('div');
 div.classList.add(`div`);
 div.style.cssText = (`backgroundColor:blue;`);
 container.append(div);
    //function to randomly choose between the 3 options in the array
    function getComputerChoice(){
        let cpuOptions = [
            `rock`,
            `paper`,
            `scissors`
        ];
        let computer = cpuOptions[Math.floor(Math.random()*cpuOptions.length)];
        return computer;
    }

    //sets variables to keep track of the player and the CPUs score
    let cpuScore = 0;
    let playerScore = 0;
    const computerSelection = getComputerChoice();

    function playRound(playerSelection) {

        for (let games = 0; games < 5; games++){  

            if (playerSelection == computerSelection) {
                div.textContent = `It's a draw!`;
                score();
                return;
                
            } else if (playerSelection === `rock`) {
                if (computerSelection === `paper`) {
                    div.textContent =("You Lose! Paper beats Rock");
                    ++cpuScore;
                    score();
                    return;
                } else {
                    div.textContent =("You win! Rock beats Scissors");
                    ++playerScore;
                    score();
                    return;
                }
            } else if (playerSelection === `paper`) {
                if (computerSelection === `scissors`) {
                    div.textContent =("You Lose! Scissors beats Paper");
                    ++cpuScore;
                    score();
                    return;
                } else {
                    div.textContent =("You win! Paper beats Rock");
                    ++playerScore;
                    score();
                    return;
                }
            } else if (playerSelection === `scissors`) {
                if (computerSelection === `rock`) {
                    div.textContent =("You Lose! Rock beats Scissors");
                    ++cpuScore;
                    score();
                    return;
                } else {
                    div.textContent =("You win! Scissors beats Paper");
                    ++playerScore;
                    score();
                    return;
                }
            } 
        } 
    } 
    
    function score() {
        console.log(`Best of 5 results so far: You: ${playerScore} CPU: ${cpuScore}`);
        if (playerScore > 2) {
            div.textContent =`You Win best of 5!`;
            playerScore = 0;
            cpuScore = 0;

        }
        if (cpuScore > 2){
            div.textContent =`You Lose best of 5!`;
            playerScore = 0;
            cpuScore = 0;

        }
        
    }
    </script>